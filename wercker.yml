box: maven:3.5.2-jdk-8

build:
  steps:
   - wercker/maven:
      goals: clean install
      cache_repo: false
      
docker-build-and-push:
   steps:
   - internal/docker-build:
      dockerfile: Dockerfile
      image-name: warp-speed-planet-search
   - internal/docker-push:
      image-name: warp-speed-planet-search
      username: $DOCKER_USERNAME
      password: $OCI_AUTH_TOKEN
      registry: https://$DOCKER_REGISTRY/v2
      repository: $DOCKER_REGISTRY/$DOCKER_REPO